<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>primerPunto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>
<body class="m-0 row justify-content-center">

    <section>

        <button type="button" class="btn btn-danger" onclick="location.href=`segundoPunto.html`">Ir al Segundo Punto</button>

        <div class="input-group mb-3" style="width: 400px; margin-top: 30px;">
            <span class="input-group-text">Producto</span>
            <input type="text" placeholder="Ingrese el producto" id="nombre" class="form-control">
        </div>
        <div class="input-group mb-3" style="width: 400px;">
            <span class="input-group-text">Cantidad</span>
            <input type="number" placeholder="Ingrese la cantidad del producto" id="cantidad" class="form-control">
        </div>
        <div class="input-group mb-3" style="width: 400px;">
            <span class="input-group-text">$</span>
            <input type="number" placeholder="Ingrese el valor unitario" id="valor" class="form-control">
        </div>
        
    </section>

    <div></div>
    <br>
    <section>
        <button  type="button" class="btn btn-success m-2" onclick="agregarProducto()" style="width: 200px;">Agregar</button>
        <button  type="button" class = "btn btn-primary m-2" onclick="totalAPagar()" style="width: 200px;"> Comprar</button> 
    
    </section>
    
    <section>
        <table class="table" id="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Nombre</th>
                <th scope="col">Cantidad</th>
                <th scope="col">Precio</th>
              </tr>
            </thead>
            <tbody>
              
            </tbody>
          </table>
    </section>
    
    
<script>
    
    let productos = []
    let valorDeLaTabla = 0

    function agregarProducto(){
        let producto ={
            nombre : document.getElementById('nombre').value,
            cantidad : Number.parseInt(document.getElementById('cantidad').value),
            valor : Number.parseFloat(document.getElementById('valor').value)
        } 
        console.log(producto, 'producto');
        let yaExiste = false
        productos.forEach(element => {
            if(producto.nombre === element.nombre){
                yaExiste = true;
            }
        });
        if(!yaExiste){
            productos.push(producto)
            alert ('Producto agregado al carrito')
            actualizarLista()
        }else{
            alert('El producto ya existe');
        }
            console.log(productos, 'productos');

    }

    function totalAPagar(){
        if(productos.length!==0){
            let valorAPagar = 0
            productos.forEach(element => {
            valorAPagar += ((element.valor) * (element.cantidad))
            console.log(valorAPagar)   
            });
            console.log(valorAPagar)
            alert('el total a pagar es: ' + valorAPagar)
        }else{
            alert('No hay ningun producto ingresado')
        }
        
    }
    
    function actualizarLista(){
        var table =  document.getElementById('table')
        for(valorDeLaTabla; valorDeLaTabla < productos.length; valorDeLaTabla++){
            var row = `<tr>
                <td>${valorDeLaTabla+1}</td>
                <td>${productos[valorDeLaTabla].nombre}</td>
                <td>${productos[valorDeLaTabla].cantidad}</td>
                <td>${productos[valorDeLaTabla].valor}</td>
                </tr>`
            table.innerHTML +=row
            }
        
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>

</html>